<style>
  /* body { margin: 0; padding: 40px; font-family: sans-serif; } */

  .event-marquee {
    width: 100%;
    overflow-x: scroll;
    white-space: nowrap;
    cursor: grab;
    scroll-behavior: auto;
  }

  .track {
    display: inline-flex;
  }

  .item {
    /* min-width: 200px; */
    /* height: 120px; */
    /* background: #eee; */
    /* border: 1px solid #bbb; */
    /* margin-right: 10px; */
    /* border-radius: 8px; */
    /* font-size: 2rem; */
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .event-marquee::-webkit-scrollbar { display: none; }









   .marquee-wrapper {
      overflow: hidden;
      width: 100%;
      background: #FFF;
      padding: 3rem 0 5rem;
    }
    .marquee-track {
      display: flex;
      width: max-content;
      animation: scroll-left 18s linear infinite;
    }
    .marquee-box {
      background: #FFF;
      height: 240px;
      width: 280px;
      margin: 0 1rem;
      padding: 2rem 0 1rem;
      border-radius: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      box-shadow: 0 0 30px rgba(55, 55, 55, 0.2);
    }
    .marquee-item {
      flex: 0 0 auto;
      width: 100vw;
      max-width: 100%;
      padding: 10px;
      display: contents;
    }
    .marquee-item a {
        color: #000;
    }
    .marquee-item p.event-date {
        font-size: 1.4rem;
        font-weight: 400;
        margin-bottom: 0;
    }
    .marquee-item .event-logo {
        width: 160px;
        height: auto;
        margin: 0 auto;
    }
    .marquee-item .event-name {
        /* font-family: "Helvetica Neue", Helvetica, Arial, sans-serif !important; */
        font-size: 1.65rem;
        /* font-weight: bold !important; */
        font-family: "Anton", sans-serif !important;
        font-weight: 400 !important;
        font-style: normal !important;
        
        /* margin-top: 1rem;
        padding: 0 2rem;
        height: 65px;
        text-align: center;
        overflow: hidden;
        text-overflow: ellipsis;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        line-clamp: 2;
        -webkit-box-orient: vertical;
 */


    margin-top: 2rem;
    padding: 0 2rem;
    height: 38px;
    text-align: center;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    margin-bottom: 0;

    text-wrap: wrap;
    }

    /* Responsive widths */
    @media (min-width: 576px) {
      .marquee-item {
        width: 50vw;
      }
    }

    @media (min-width: 768px) {
      .marquee-item {
        width: 33.3333vw;
      }
    }

    @media (min-width: 992px) {
      .marquee-item {
        width: 20vw;
      }
    }

    /* .event-logo {
        position: relative;
    } */
    .event-logo img {
        width: 100%;
        margin: -1.5rem auto -3rem;
        -webkit-user-drag: none; /* Safari and older Chrome */
        -moz-user-drag: none;    /* Firefox */
        -ms-user-drag: none;     /* Internet Explorer/Edge */
        /* user-drag: none;         Standard property */
        -webkit-user-select: none; /* Safari and older Chrome */
        -moz-user-select: none;    /* Firefox */
        -ms-user-select: none;     /* Internet Explorer/Edge */
        user-select: none;  
    }

</style>

<div class="event-marquee marquee-wrapper" id="eventMarquee">
    <div class="track" id="track">

    <!-- <div class="item">1</div>
    <div class="item">2</div>
    <div class="item">3</div>
    <div class="item">4</div> -->

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/8/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/Rhode-Island.png" />
                    </div>
                    <h3 class="event-name">New England College Club & Masters Swimming Meet</h3>
                </div>
            <!-- </a> -->
        </div>

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/9/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/Ithaca-College.png" />
                    </div>
                    <h3 class="event-name">Ithica College Narwhal Invitational Fall 2025</h3>
                </div>
            <!-- </a> -->
        </div>

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/15/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/Clemson-Club-Swim.png" />
                    </div>
                    <h3 class="event-name">2025 TigerTown Invitational</h3>
                </div>
            <!-- </a> -->
        </div>

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/15/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/Northern-Colorado.png" />
                    </div>
                    <h3 class="event-name">Bear Invitational Fall 2025</h3>
                </div>
            <!-- </a> -->
        </div>

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/15/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/Ohio-Swim-Club.png" />
                    </div>
                    <h3 class="event-name">Bobcat Bash Invitational</h3>
                </div>
            <!-- </a> -->
        </div>

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/16/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/Mizzou-Club-Swimming.png" />
                    </div>
                    <h3 class="event-name">Show Your Stripes Invitational</h3>
                </div>
            <!-- </a> -->
        </div>

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/16/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/Bowling-Green-Club-Swimming.png" />
                    </div>
                    <h3 class="event-name">BGSU Turkey Trot Relay Race</h3>
                </div>
            <!-- </a> -->
        </div>

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/22/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/Rice-Swim-Club.png" />
                    </div>
                    <h3 class="event-name">Fall 2025 Owl Invitational</h3>
                </div>
            <!-- </a> -->
        </div>

        <div class="item marquee-item">
            <!-- <a href="/events/Calendar%20of%20Events"> -->
                <div class="marquee-box">
                    <p class="event-date">11/23/2025</p>
                    <div class="event-logo">
                        <img src="https://www.collegeclubswimming.com/-/media/ccs/events/college%20logos/2025-26/UCLA-Swim-Club.png" />
                    </div>
                    <h3 class="event-name">UCLA Fall 2025 Invitational</h3>
                </div>
            <!-- </a> -->
        </div>

    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function() {

        const marqueecarousel = document.getElementById("eventMarquee");
        const track = document.getElementById("track");

        if (!marqueecarousel || !track) return; // Sitecore safety check

        const originalItems = Array.from(track.children);
        const THRESHOLD = 400;

        function checkEdges() {
            const scrollLeft = marqueecarousel.scrollLeft;
            const maxScroll = track.scrollWidth - marqueecarousel.clientWidth;

            if (scrollLeft < THRESHOLD) prependSet();
            if (scrollLeft > maxScroll - THRESHOLD) appendSet();
        }

        function appendSet() {
            originalItems.forEach(item =>
            track.appendChild(item.cloneNode(true))
            );
        }

        function prependSet() {
            const oldLeft = marqueecarousel.scrollLeft;
            const clones = originalItems.map(i => i.cloneNode(true));

            clones.reverse().forEach(clone =>
            track.insertBefore(clone, track.firstChild)
            );

            const addedWidth = clones.length * (originalItems[0].offsetWidth + 10);
            marqueecarousel.scrollLeft = oldLeft + addedWidth;
        }

        setInterval(checkEdges, 50);

        let isDown = false, startX, startScroll;

        function stopDrag() {
            isDown = false;
            marqueecarousel.style.cursor = "grab";
            startAuto();
        }

        marqueecarousel.addEventListener("mousedown", e => {
            isDown = true;
            startX = e.pageX;
            startScroll = marqueecarousel.scrollLeft;
            marqueecarousel.style.cursor = "grabbing";
            stopAuto();
        });

        marqueecarousel.addEventListener("mousemove", e => {
            if (!isDown) return;
            marqueecarousel.scrollLeft = startScroll - (e.pageX - startX);
        });

        // marqueecarousel.addEventListener("mouseup", stopDrag);
        // marqueecarousel.addEventListener("mouseleave", stopDrag);



        // Pause on hover
        marqueecarousel.addEventListener("mouseenter", () => {
            if (!isDown) stopAuto();
        });
        marqueecarousel.addEventListener("mouseleave", () => {
            if (!isDown) startAuto();
        });
        marqueecarousel.addEventListener("mousedown", (event) => { 
            stopAuto();
            isDown = true;
        });
        marqueecarousel.addEventListener("mouseup", (event) => { 
            startAuto();
            isDown = false;
        });
        //



        marqueecarousel.addEventListener("touchstart", e => {
            alert("touch");
            isDown = true;
            startX = e.touches[0].pageX;
            startScroll = marqueecarousel.scrollLeft;
            stopAuto();
        }, { passive: true });

        marqueecarousel.addEventListener("touchmove", e => {
            if (!isDown) return;
            marqueecarousel.scrollLeft = startScroll - (e.touches[0].pageX - startX);
        }, { passive: true });

        marqueecarousel.addEventListener("touchend", stopDrag);

        let auto;
        function startAuto() {
            stopAuto();
            auto = setInterval(() => {
            marqueecarousel.scrollLeft += 1;
            checkEdges();
            }, 16);
            console.log("start auto");
        }
        function stopAuto() {
            console.log("stop auto");
            clearInterval(auto);
        }

        startAuto();

    });
</script>